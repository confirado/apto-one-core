// Importing global, common, form-inputs, and elements styles
@import "globals";
@import "common";
@import "form-inputs";
@import "elements";

// Mixin for styling a box, with customizable padding and width based on screen size
@mixin box($screen-size: 'mobile') {
    // Styles for the box
    padding: 34px var(--element-gap) 30px var(--element-gap);
    width: 100%;
    display: flex;
    flex-direction: column;

    // Adjustments based on screen size
    @if ($screen-size == 'mobile') {
        align-items: center;
    }

    @if ($screen-size == 'tablet' or $screen-size == 'desktop') {
        align-items: flex-start;
    }
}

// Mixin for styling an element within a box, with width adjustments for different screen sizes
@mixin box-element($screen-size: 'mobile') {
    justify-items: center;
    margin-top: var(--element-gap);

    @if ($screen-size == 'mobile') {
        width: var(--input-mobile-width);
    }

    @if ($screen-size == 'tablet' or $screen-size == 'desktop') {
        width: 100%;
    }
}

// Mixin for styling colors with customizable parameters
@mixin colors($element-width: 80px, $color-box-width: 40px, $padding: 10px 10px, $checkbox: 22px) {
    // Styles for the color element
    display: flex;
    align-items: center;
    border-radius: var(--border-radius-card);
    padding: $padding;
    width: $element-width;
    cursor: pointer;
    flex-direction: column;
    position: relative;

    // Hover effect
    &:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    // Styles for the color box
    .box {
        display: flex;
        position: relative;
        width: $color-box-width;
        height: $color-box-width;
        border-radius: var(--border-radius-card);
        border: none;

        // Styles for linear gradient box
        &.linear-gradient {
            @include linear-gradient();
        }

        .circle {
            display: none;
        }

        // Styles for images inside the color box
        img {
            width: 100%;
            height: auto;
            border-radius: var(--border-radius-card);
        }
    }

    // Styles for the color name
    .name {
        @include cut-long-text();
        text-align: center;
        width: 100%;
        font-size: 14px;
        font-weight: 500;
        margin-top: 7px;
    }

    // Styles for the selected state
    &.selected {
        .box {
            border: solid 2px var(--color-border-selected);

            .circle {
                @include circle-checkbox($checkbox);
            }
        }
    }
}

// Styles for mat-radio-group
mat-radio-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    word-break: break-word;
    width: 100%;
    margin-bottom: 2vh;

    mat-radio-button:nth-child(2) {
        margin-top: var(--element-gap);
    }

    .mat-radio-button {
        width: 100%;
    }
}

// Styles for the main material picker element
.material-picker-element {
    // Selected state styles
    &.selected {
        border: 3px solid var(--color-border-dimensions);
        border-radius: var(--border-radius-card);
    }

    // Description styling
    .header + .description:not(:empty) {
        margin-top: var(--element-gap);
    }

    // Header styling
    .header {
        @include header();
        @include title();

        flex: 1;
        padding-top: 2vh;

        // Results display styling
        .results {
            display: flex;
            justify-content: center;
        }
    }

    // Color Filter styling
    .color-filter {
        @include box();

        position: relative;

        // Circle styling
        .circle {
            @include circle-checkbox(25px, 'inner');
            border: 2px solid var(--color-border-selected);
        }

        // Available Colors styling
        .available-colors {
            margin-top: var(--element-gap);
            display: grid;
            grid-template-columns: 80px auto;
            grid-template-areas: "all-color other-colors";

            // Elements styling
            .elements {
                display: flex;
                flex-wrap: wrap;

                &.all-color {
                    grid-area: all-color;
                    height: max-content;
                }

                &.other-colors {
                    grid-area: other-colors;
                }

                // Individual color element styling
                .element {
                    @include colors(80px, 40px, 10px 10px, 15px);
                }
            }
        }
    }

    // Search and Price Container styling
    .search-price-container {
        @include box();
    }

    // Properties styling
    .properties {
        @include box();

        // Individual property element styling
        .element {
            @include box-element();

            .input {
                .prefix {
                    margin-bottom: var(--input-elements-gap);
                }
            }

            .input + .input{
                margin-top: var(--element-gap);
            }
        }
    }

    // Filtered Materials styling
    .filtered-materials {
        @include box();

        // Individual filtered material styling
        .elements {
            display: flex;
            flex-wrap: wrap;
            margin-top: var(--element-gap);
            width: 100%;

            .element {
                @include colors(135px, 95px, 10px 20px, 22px);
                flex: 0 0 calc(25% - var(--element-gap));

                &:not(:last-child) {
                    margin-right: var(--element-gap);
                }
            }

            .placeholder {
                flex: 0 0 calc(25% - var(--element-gap));
                visibility: hidden;
            }

            @for $i from 1 through 3 {
                &:nth-last-child(-n + #{$i}) {
                    ~ .placeholder {
                        visibility: visible;
                    }
                }
            }
        }
    }

    // Color Mix styling
    .color-mix {
        display: flex;
        flex-wrap: wrap;

        @include box();

        // Picture styling
        .picture {
            margin-top: var(--element-gap);

            img {
                width: calc(2*var(--image-mobile-width));
            }
        }

        // Element styling
        .element {
            @include box-element();
        }
    }

    // Color Order styling
    .color-order {
        @include box();

        // Element styling
        .element {
            @include box-element();

            .input + .input {
                margin-top: var(--element-gap);
            }

            .input-input {
                width: 100px;
            }
        }
    }

    // Description styling
    .description {
        @include description();
    }

    // Apply Button styling
    .apply-button {
        @include buttons();
        padding: var(--element-gap);
    }
}

// Media queries for tablets and larger screens
@media only screen and (min-width: $mobile-max-width) {
    .material-picker-element {
        // Header styling for tablet screens
        .header {
            @include header('tablet');
            @include title('tablet');

            .results {
            }
        }

        // Color Filter styling for tablet screens
        .color-filter {
            @include box('tablet');
        }

        // Search and Price Container styling for tablet screens
        .search-price-container {
            @include box('tablet');

            width: 100%;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        // Search Box styling for tablet screens
        .search-box {
            width: calc(67% - var(--element-gap)/2);

            .element {
                margin-top: var(--element-gap);
            }
        }

        // Price Group styling for tablet screens
        .price-group {
            width: calc(33% - var(--element-gap)/2);

            .element {
                margin-top: var(--element-gap);
            }
        }

        // Properties styling for tablet screens
        .properties {
            @include box('tablet');

            .element {
                width: 100%;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-between;

                .input {
                    width: calc(33% - var(--element-gap)/2);
                    margin-top: var(--element-gap);
                }
            }
        }

        // Filtered Materials styling for tablet screens
        .filtered-materials {
            @include box('tablet');
        }

        // Color Mix styling for tablet screens
        .color-mix {
            @include box('tablet');

            .element {
                @include box-element('tablet');
            }
        }

        // Color Order styling for tablet screens
        .color-order {
            @include box('tablet');

            .element {
                @include box-element('tablet');
            }
        }

        // Apply Button styling for tablet screens
        .apply-button {
            @include buttons('tablet');
        }
    }
}
